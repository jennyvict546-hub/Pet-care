<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modificar Citas - PET CARE</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #c9e4e7;
      margin: 100;
      padding: 0;
    }

    .contenedor {
      display: flex;
      margin: 30px;
    }

        .sidebar {
      width: 200px;
      background-color: #65A8C2;
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 150vh;
    }

    .sidebar h2 {
      margin-bottom: 30px;
    }

    .sidebar a {
      color: white;
      text-decoration: none;
      margin: 10px 100;
    }

    .sidebar a:hover {
      text-decoration: underline;
    }


    .submenu {
      display: none;
      padding-left: 10px;
    }
    .submenu.show {
      display: block;
    }
    .bton-active {
      background-color: #4CAF50 !important;
      color: white;
    }

    .formulario {
      flex-grow: 1;
      background-color: #b6d9d3;
      padding: 20px;
      border-radius: 10px;
      margin-left: 30px;
    }

    h2 {
      background-color: #65A8C2;
      color: white;
      text-align: center;
      padding: 10px;
      border-radius: 8px;
    }

    input, select, textarea {
      padding: 8px;
      border: 1px solid #a0bcb6;
      border-radius: 8px;
      width: 100%;
      box-sizing: border-box;
    }

    .grupo {
      margin-bottom: 15px;
    }

    button {
      background-color: #7a6b6b;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background-color: #5e5252;
    }

    .mensaje {
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
    }
        /* Men√∫ lateral */
    .menu-buttons {
      display: grid;
      grid-template-columns: repeat(2, 160px);
      gap: 25px;
      justify-content: center;
      margin-top: 40px;
    }

    .menu-buttons button {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 160px;
      height: 140px;
      font-size: 16px;
      border: none;
      background-color: #B5D6CB;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.3s;      
    }

    .menu-buttons button:hover {
      background-color: #65A8C2;
      transform: scale(1.05);
    }
    .menu {
      width: 220px;
      background-color: #65A8C2;
      color: rgb(30, 25, 25);
      padding: 20px;
      border-radius: 10px;
    }

    .menu h2 {
      text-align: center;
      font-family: 'Comic Sans MS';
    }

    .menu a {
      display: block;
      color: white;
      text-decoration: none;
      margin: 10px 0;
    }

    .menu a:hover {
      text-decoration: underline;
    }

    .boton-salir {
      display: block;
      margin-top: 30px;
      background-color: #7a6b6b;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      color: white;
    }
        .logoutc {
      margin-top: 30px;
      background-color: #e05a5a;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
    }

    .logout {
      margin-top: 30px;
      background-color: #e5f4f1;
      padding: 8px 15px;
      border-radius: 55px;
      cursor: pointer;
    }
    .logouts {
      margin-top: 30px;
      background-color: #B5D6CB;
      padding: 8px 15px;
      border-radius: 100px;
      cursor: pointer;
    }
        /* Formulario */
    .formulario {
      flex-grow: 1;
      background-color: #b6d9d3;
      padding: 20px;
      border-radius: 10px;
      margin-left: 30px;
    }

    

    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    input, select, textarea {
      padding: 8px;
      border: 1px solid #a0bcb6;
      border-radius: 8px;
      width: 100%;
      box-sizing: border-box;
    }

    textarea {
      grid-column: span 2;
      height: 80px;
    }

    .boton-guardar {
      grid-column: span 2;
      text-align: center;
    }

    button {
      background-color: #e5f4f1;
      color: #000000;
      border: none;
      padding: 10px 20px;
      border-radius: 100px;
      cursor: pointer;
    }

    button:hover {
      background-color: #e5f4f1;
    }

     /*menu desplegable*/
    .menu-btn {
  display: block;
  width: 100%;
  padding: 10px;
  text-align: left;
  border: none;
  background-color: #65A8C2;
  cursor: pointer;
  transition: background-color 0.3s;
}

.menu-btn:hover {
  background-color: #ddd;
}

.menu-btn.active {
  background-color: #4CAF50;
  color: white;
}

.submenu {
  display: none; /* oculto por defecto */
  padding-left: 20px;
}
.submenu.show {
  display: block; /* mostrar cuando se active */
}
.bton-active{
    margin-top: 25px;
      background-color: #4CAF50;
      padding: 8px 15px;
      border-radius: 100px;
      cursor: pointer;
}
  </style>
</head>
<body>

<div class="contenedor">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <img src="logo.png" width="180" height="200">
    <h2>üêæ PET CARE</h2>

    <button id="btn-citas">Citas ‚ñæ</button>
    <div class="submenu" id="submenu-citas">
      <br><button class="logouts" onclick="agendar()">- Agendar</button>
      <br><button class="logouts" onclick="Ver()">- Ver Citas</button>
      <br><button class="logouts" onclick="eliminarC()">- Eliminar</button>
      <button class="bton-active">- Modificar</button>
    </div>

    <br><button id="btn-inventario">Inventario ‚ñæ</button>
    <div class="submenu" id="submenu-inventario">
      <button onclick="agregar()">- Agregar</button><br>
      <button onclick="modificar()">- Modificar</button><br>
      <button onclick="eliminarI()">- Eliminar</button>
    </div>

    <br><button onclick="Clientes()">Clientes</button>
    <br><button onclick="Usuarios()">Usuarios</button>
    <br><button onclick="Consultas()">Consultas</button>

    <br><div class="logoutc" onclick="cerrarSesion()">Cerrar sesi√≥n</div>
  </div>

  <!-- FORMULARIO -->
  <div class="formulario">
    <h2>Modificar Cita</h2>

    <div class="grupo">
      <input type="text" id="buscar" placeholder="Buscar por cliente o mascota">
    </div>

    <div class="grupo">
      <label>ID Cita</label>
      <input type="text" id="id" disabled>
    </div>

    <div class="grupo">
      <label>Cliente</label>
      <input type="text" id="cliente">
    </div>

    <div class="grupo">
      <label>Mascota</label>
      <input type="text" id="mascota">
    </div>

    <div class="grupo">
      <label>Tipo de cita</label>
      <select id="tipo">
        <option value="Consulta general">Consulta general</option>
        <option value="Vacunaci√≥n">Vacunaci√≥n</option>
        <option value="Emergencia">Emergencia</option>
      </select>
    </div>

    <div class="grupo">
      <label>Motivo</label>
      <textarea id="motivo"></textarea>
    </div>

    <div class="grupo">
      <label>Veterinario</label>
      <select id="veterinario">
        <option value="Eduardo">Eduardo</option>
        <option value="Iv√°n">Iv√°n</option>
      </select>
    </div>

    <div class="grupo">
      <label>Prioridad</label>
      <select id="prioridad">
        <option value="Baja">Baja</option>
        <option value="Media">Media</option>
        <option value="Alta">Alta</option>
      </select>
    </div>

    <div class="grupo">
      <label>Hora</label>
      <input type="time" id="hora">
    </div>

    <div class="grupo">
      <label>Fecha</label>
      <input type="date" id="fecha">
    </div>

    <button id="btnGuardar">Guardar cambios</button>

    <p class="mensaje" id="mensaje"></p>
  </div>
</div>

<script>
  // BOTON DESPLEGABLE
  const btnCitas = document.getElementById("btn-citas");
  const submenuCitas = document.getElementById("submenu-citas");

  btnCitas.onclick = () => submenuCitas.classList.toggle("show");

  const btnInventario = document.getElementById("btn-inventario");
  const submenuInventario = document.getElementById("submenu-inventario");
  btnInventario.onclick = () => submenuInventario.classList.toggle("show");

  // Buscar cita
  document.getElementById("buscar").addEventListener("keyup", () => {
    let valor = document.getElementById("buscar").value;

    fetch("api_buscarCita.php?buscar=" + valor)
      .then(r => r.json())
      .then(cita => {
        if (!cita) {
          document.getElementById("mensaje").textContent = "No se encontr√≥ ninguna cita.";
          return;
        }

        document.getElementById("id").value = cita.id_cita;
        document.getElementById("cliente").value = cita.cliente;
        document.getElementById("mascota").value = cita.mascota;
        document.getElementById("tipo").value = cita.tipo_cita;
        document.getElementById("motivo").value = cita.motivo;
        document.getElementById("veterinario").value = cita.veterinario;
        document.getElementById("prioridad").value = cita.prioridad;
        document.getElementById("hora").value = cita.hora;
        document.getElementById("fecha").value = cita.fecha;
      });
  });

  // Guardar cambios
  document.getElementById("btnGuardar").onclick = () => {
    let datos = new FormData();
    datos.append("id", document.getElementById("id").value);
    datos.append("cliente", document.getElementById("cliente").value);
    datos.append("mascota", document.getElementById("mascota").value);
    datos.append("tipo_cita", document.getElementById("tipo").value);
    datos.append("motivo", document.getElementById("motivo").value);
    datos.append("veterinario", document.getElementById("veterinario").value);
    datos.append("prioridad", document.getElementById("prioridad").value);
    datos.append("hora", document.getElementById("hora").value);
    datos.append("fecha", document.getElementById("fecha").value);

    fetch("api_modificarCita.php", {
      method: "POST",
      body: datos
    })
    .then(r => r.text())
    .then(resp => {
      if (resp === "ok") {
        document.getElementById("mensaje").textContent = "‚úî Cita actualizada correctamente";
        document.getElementById("mensaje").style.color = "green";
      } else {
        document.getElementById("mensaje").textContent = "Error: " + resp;
        document.getElementById("mensaje").style.color = "red";
      }
    });
  };

  // Navegaci√≥n
  function agendar(){ window.location.href="agendarCitas.html"; }
  function Ver(){ window.location.href="verCitas.html"; }
  function eliminarC(){ window.location.href="eliminarCitas.html"; }
</script>



</body>
</html>
